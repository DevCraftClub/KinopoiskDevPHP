# KinoPoisk.dev PHP –∫–ª–∏–µ–Ω—Ç

![PHP Version](https://img.shields.io/badge/PHP-%3E%3D8.3-blue)
![License](https://img.shields.io/badge/license-MIT-green)
![API Version](https://img.shields.io/badge/API-v1.4-orange)

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π PHP 8.3 –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º API [KinoPoisk.dev](https://kinopoisk.dev). –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º API —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–∏–ø–æ–≤, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ API v1.4** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ **PHP 8.3+** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —è–∑—ã–∫–∞
- ‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ –¥–ª—è IDE –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–£–¥–æ–±–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã** - –º–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å fluent interface
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ **PSR-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º PHP

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ß–µ—Ä–µ–∑ Composer

```bash
composer require devcraftclub/kinopoisk-dev
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP >= 8.3
- Guzzle HTTP >= 7.0
- –¢–æ–∫–µ–Ω API –æ—Ç [kinopoisk.dev](https://kinopoisk.dev)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å API –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [kinopoisk.dev](https://kinopoisk.dev)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω
3. –ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É [@kinopoiskdev_bot](https://t.me/kinopoiskdev_bot) –≤ Telegram

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php

require_once 'vendor/autoload.php';

use KinopoiskDev\Http\MovieRequests;
use KinopoiskDev\Http\PersonRequests;
use KinopoiskDev\Filter\MovieSearchFilter;
use KinopoiskDev\Exceptions\KinopoiskDevException;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
$apiToken = '–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å';
$movieClient = new MovieRequests($apiToken);

try {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –ø–æ ID
    $movie = $movieClient->getMovieById(666);
    echo "–§–∏–ª—å–º: {$movie->name} ({$movie->year})\n";
    echo "–†–µ–π—Ç–∏–Ω–≥ –ö–ü: {$movie->rating->kp}\n";
    
    // –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
    $filter = new MovieSearchFilter();
    $filter->withRatingBetween(8.0, 10.0)
           ->withYearBetween(2020, 2024)
           ->withIncludedGenres(['–¥—Ä–∞–º–∞', '—Ç—Ä–∏–ª–ª–µ—Ä'])
           ->onlyMovies();
    
    $results = $movieClient->searchMovies($filter, 1, 10);
    echo "–ù–∞–π–¥–µ–Ω–æ: {$results->total} —Ñ–∏–ª—å–º–æ–≤\n";
    
} catch (KinopoiskDevException $e) {
    echo "–û—à–∏–±–∫–∞ API: " . $e->getMessage() . "\n";
}
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### –§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```php
use KinopoiskDev\Http\MovieRequests;

$movieClient = new MovieRequests($apiToken);

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –ø–æ ID
$movie = $movieClient->getMovieById(666);

// –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º
$randomMovie = $movieClient->getRandomMovie();

// –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
$searchResults = $movieClient->searchByName('–ú–∞—Ç—Ä–∏—Ü–∞');

// –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
$results = $movieClient->searchMovies($filter, $page, $limit);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ —Ñ–∏–ª—å–º–æ–≤
$awards = $movieClient->getMovieAwards($filter, $page, $limit);

// –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–æ–ª–µ–π
$genres = $movieClient->getPossibleValuesByField('genres.name');
```

#### –£–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```php
// –ù–æ–≤–∏–Ω–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –≥–æ–¥–∞
$latest = $movieClient->getLatestMovies();

// –§–∏–ª—å–º—ã –ø–æ –∂–∞–Ω—Ä—É
$comedies = $movieClient->getMoviesByGenre('–∫–æ–º–µ–¥–∏—è');
$dramaThrillers = $movieClient->getMoviesByGenre(['–¥—Ä–∞–º–∞', '—Ç—Ä–∏–ª–ª–µ—Ä']);

// –§–∏–ª—å–º—ã –ø–æ —Å—Ç—Ä–∞–Ω–µ
$russianMovies = $movieClient->getMoviesByCountry('–†–æ—Å—Å–∏—è');

// –§–∏–ª—å–º—ã –ø–æ –ø–µ—Ä–∏–æ–¥—É
$movies2020s = $movieClient->getMoviesByYearRange(2020, 2024);
```

### –ü–µ—Ä—Å–æ–Ω—ã

```php
use KinopoiskDev\Http\PersonRequests;

$personClient = new PersonRequests($apiToken);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã –ø–æ ID
$person = $personClient->getPersonById(123);

// –ü–æ–∏—Å–∫ –ø–µ—Ä—Å–æ–Ω
$personFilter = new MovieSearchFilter(); // –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–µ—Ä—Å–æ–Ω
$persons = $personClient->searchPersons($personFilter);

// –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
$searchResults = $personClient->searchByName('–õ–µ–æ–Ω–∞—Ä–¥–æ –î–∏–ö–∞–ø—Ä–∏–æ');

// –ù–∞–≥—Ä–∞–¥—ã –ø–µ—Ä—Å–æ–Ω
$awards = $personClient->getPersonAwards($personFilter);
```

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```php
use KinopoiskDev\Http\ImageRequests;

$imageClient = new ImageRequests($apiToken);

// –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
$images = $imageClient->getImages($filter);

// –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞
$movieImages = $imageClient->getImagesByMovieId(666, 'poster');

// –ü–æ—Å—Ç–µ—Ä—ã –≤—ã—Å–æ–∫–æ—Ä–µ–π—Ç–∏–Ω–≥–æ–≤—ã—Ö —Ñ–∏–ª—å–º–æ–≤
$posters = $imageClient->getHighRatedPosters(8.0);
```

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏

```php
use KinopoiskDev\Http\ListRequests;

$listClient = new ListRequests($apiToken);

// –í—Å–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
$collections = $listClient->getAllLists();

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è
$top250 = $listClient->getListBySlug('top250');

// –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
$popular = $listClient->getPopularLists();

// –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
$genreCollections = $listClient->getListsByCategory('–∂–∞–Ω—Ä–æ–≤—ã–µ');
```

### –î—Ä—É–≥–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏

```php
use KinopoiskDev\Http\SeasonRequests;
use KinopoiskDev\Http\ReviewRequests;
use KinopoiskDev\Http\StudioRequests;
use KinopoiskDev\Http\KeywordRequests;

// –°–µ–∑–æ–Ω—ã —Å–µ—Ä–∏–∞–ª–æ–≤
$seasonClient = new SeasonRequests($apiToken);
$seasons = $seasonClient->getSeasons($filter);

// –†–µ—Ü–µ–Ω–∑–∏–∏
$reviewClient = new ReviewRequests($apiToken);
$reviews = $reviewClient->getReviews($filter);

// –°—Ç—É–¥–∏–∏
$studioClient = new StudioRequests($apiToken);
$studios = $studioClient->getStudios($filter);

// –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
$keywordClient = new KeywordRequests($apiToken);
$keywords = $keywordClient->getKeywords($filter);
```

## üîç –°–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å fluent interface:

### MovieSearchFilter

```php
use KinopoiskDev\Filter\MovieSearchFilter;

$filter = new MovieSearchFilter();

// –ë–∞–∑–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
$filter->searchByName('–ú–∞—Ç—Ä–∏—Ü–∞')                    // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
       ->year(2020)                                 // –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≥–æ–¥
       ->withYearBetween(2020, 2024)               // –î–∏–∞–ø–∞–∑–æ–Ω –ª–µ—Ç
       ->withRatingBetween(7.0, 10.0)              // –î–∏–∞–ø–∞–∑–æ–Ω —Ä–µ–π—Ç–∏–Ω–≥–∞
       ->withVotesBetween(10000, 1000000);         // –î–∏–∞–ø–∞–∑–æ–Ω –≥–æ–ª–æ—Å–æ–≤

// –ñ–∞–Ω—Ä—ã –∏ —Å—Ç—Ä–∞–Ω—ã
$filter->withIncludedGenres(['–¥—Ä–∞–º–∞', '—Ç—Ä–∏–ª–ª–µ—Ä'])   // –í–∫–ª—é—á–∏—Ç—å –∂–∞–Ω—Ä—ã
       ->withExcludedGenres(['—É–∂–∞—Å—ã'])              // –ò—Å–∫–ª—é—á–∏—Ç—å –∂–∞–Ω—Ä—ã
       ->withIncludedCountries('–°–®–ê')               // –í–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–∞–Ω—ã
       ->withExcludedCountries(['–§—Ä–∞–Ω—Ü–∏—è']);        // –ò—Å–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–∞–Ω—ã

// –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
$filter->onlyMovies()                               // –¢–æ–ª—å–∫–æ —Ñ–∏–ª—å–º—ã
       ->onlySeries()                               // –¢–æ–ª—å–∫–æ —Å–µ—Ä–∏–∞–ª—ã
       ->onlyAnimated();                            // –¢–æ–ª—å–∫–æ –∞–Ω–∏–º–∞—Ü–∏—è

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
$filter->sortByKinopoiskRating()                    // –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É –ö–ü
       ->sortByImdbRating()                         // –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É IMDB
       ->sortByYear()                               // –ü–æ –≥–æ–¥—É
       ->sortByCreated();                           // –ü–æ –¥–∞—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
$filter->withPoster()                               // –¢–æ–ª—å–∫–æ —Å –ø–æ—Å—Ç–µ—Ä–æ–º
       ->withTrailer()                              // –¢–æ–ª—å–∫–æ —Å —Ç—Ä–µ–π–ª–µ—Ä–æ–º
       ->withHighRating(8.0);                       // –í—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥
```

### –°–ª–æ–∂–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

```php
// –ü–æ–∏—Å–∫ –ª—É—á—à–∏—Ö —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –¥—Ä–∞–º 2020-2024
$filter = new MovieSearchFilter();
$filter->withIncludedCountries('–†–æ—Å—Å–∏—è')
       ->withIncludedGenres('–¥—Ä–∞–º–∞')
       ->withYearBetween(2020, 2024)
       ->withRatingBetween(7.0, 10.0)
       ->withVotesBetween(1000, null)
       ->withPoster()
       ->sortByKinopoiskRating()
       ->onlyMovies();

$results = $movieClient->searchMovies($filter, 1, 20);

// –ü–æ–∏—Å–∫ –∑–∞—Ä—É–±–µ–∂–Ω—ã—Ö —Å–µ—Ä–∏–∞–ª–æ–≤-—Ç—Ä–∏–ª–ª–µ—Ä–æ–≤ —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º
$filter = new MovieSearchFilter();
$filter->withExcludedCountries(['–†–æ—Å—Å–∏—è', '–°–°–°–†'])
       ->withIncludedGenres('—Ç—Ä–∏–ª–ª–µ—Ä')
       ->withRatingBetween(8.0, 10.0)
       ->withVotesBetween(50000, null)
       ->onlySeries()
       ->sortByImdbRating();

$series = $movieClient->searchMovies($filter);
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```php
// –í–∫–ª—é—á–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
$movieClient = new MovieRequests($apiToken, null, true);

// –ö–∞—Å—Ç–æ–º–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç
$httpClient = new \GuzzleHttp\Client([
    'timeout' => 60,
    'headers' => [
        'User-Agent' => 'MyApp/1.0'
    ]
]);

$movieClient = new MovieRequests($apiToken, $httpClient, true);
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
KINOPOISK_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
KINOPOISK_USE_CACHE=true
```

```php
use Dotenv\Dotenv;

$dotenv = Dotenv::createImmutable(__DIR__);
$dotenv->load();

$apiToken = $_ENV['KINOPOISK_TOKEN'];
$useCache = $_ENV['KINOPOISK_USE_CACHE'] === 'true';

$movieClient = new MovieRequests($apiToken, null, $useCache);
```

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∏–Ω–æ–ø–æ–∏—Å–∫–∞

```php
<?php

require_once 'vendor/autoload.php';

use KinopoiskDev\Http\MovieRequests;
use KinopoiskDev\Filter\MovieSearchFilter;

class MiniKinopoisk {
    private MovieRequests $movieClient;
    
    public function __construct(string $apiToken) {
        $this->movieClient = new MovieRequests($apiToken, null, true);
    }
    
    /**
     * –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–ø —Ñ–∏–ª—å–º–æ–≤ –ø–æ –∂–∞–Ω—Ä—É
     */
    public function getTopMoviesByGenre(string $genre, int $limit = 10): array {
        $filter = new MovieSearchFilter();
        $filter->withIncludedGenres($genre)
               ->withRatingBetween(7.0, 10.0)
               ->withVotesBetween(10000, null)
               ->withPoster()
               ->onlyMovies()
               ->sortByKinopoiskRating();
        
        $results = $this->movieClient->searchMovies($filter, 1, $limit);
        
        return array_map(function($movie) {
            return [
                'id' => $movie->id,
                'name' => $movie->name,
                'year' => $movie->year,
                'rating' => $movie->rating->kp,
                'poster' => $movie->poster->url ?? null,
                'genres' => array_map(fn($g) => $g->name, $movie->genres ?? []),
                'countries' => array_map(fn($c) => $c->name, $movie->countries ?? [])
            ];
        }, $results->docs);
    }
    
    /**
     * –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∂–∞–Ω—Ä–æ–≤
     */
    public function getRecommendations(array $favoriteGenres, int $limit = 5): array {
        $filter = new MovieSearchFilter();
        $filter->withIncludedGenres($favoriteGenres)
               ->withRatingBetween(7.5, 10.0)
               ->withVotesBetween(5000, null)
               ->withYearBetween(2010, date('Y'))
               ->withPoster()
               ->sortByKinopoiskRating();
        
        $results = $this->movieClient->searchMovies($filter, 1, $limit);
        return $this->formatMovieResults($results->docs);
    }
    
    private function formatMovieResults(array $movies): array {
        return array_map(function($movie) {
            return [
                'title' => $movie->name,
                'year' => $movie->year,
                'rating' => round($movie->rating->kp ?? 0, 1),
                'description' => $movie->shortDescription ?? $movie->description,
                'poster' => $movie->poster->url ?? null,
                'kinopoisk_url' => "https://www.kinopoisk.ru/film/{$movie->id}/",
                'genres' => implode(', ', array_map(fn($g) => $g->name, $movie->genres ?? [])),
                'countries' => implode(', ', array_map(fn($c) => $c->name, $movie->countries ?? []))
            ];
        }, $movies);
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
$kinopoisk = new MiniKinopoisk($apiToken);

// –¢–æ–ø –¥—Ä–∞–º
$topDramas = $kinopoisk->getTopMoviesByGenre('–¥—Ä–∞–º–∞', 20);

// –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
$recommendations = $kinopoisk->getRecommendations(['—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞', '—Ç—Ä–∏–ª–ª–µ—Ä'], 10);

foreach ($recommendations as $movie) {
    echo "{$movie['title']} ({$movie['year']}) - {$movie['rating']}/10\n";
    echo "{$movie['description']}\n\n";
}
```

### –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤

```php
<?php

class MovieTrendAnalyzer {
    private MovieRequests $movieClient;
    
    public function __construct(string $apiToken) {
        $this->movieClient = new MovieRequests($apiToken, null, true);
    }
    
    /**
     * –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∂–∞–Ω—Ä—ã –ø–æ –≥–æ–¥–∞–º
     */
    public function analyzeGenreTrends(int $startYear, int $endYear): array {
        $trends = [];
        
        for ($year = $startYear; $year <= $endYear; $year++) {
            $filter = new MovieSearchFilter();
            $filter->year($year)
                   ->withRatingBetween(7.0, 10.0)
                   ->withVotesBetween(1000, null)
                   ->onlyMovies();
            
            $results = $this->movieClient->searchMovies($filter, 1, 100);
            
            $genreCount = [];
            foreach ($results->docs as $movie) {
                foreach ($movie->genres ?? [] as $genre) {
                    $genreCount[$genre->name] = ($genreCount[$genre->name] ?? 0) + 1;
                }
            }
            
            arsort($genreCount);
            $trends[$year] = array_slice($genreCount, 0, 5, true);
        }
        
        return $trends;
    }
    
    /**
     * –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ä—ã–≤—ã –≥–æ–¥–∞
     */
    public function findBreakthroughMovies(int $year, float $minRating = 8.0): array {
        $filter = new MovieSearchFilter();
        $filter->year($year)
               ->withRatingBetween($minRating, 10.0)
               ->withVotesBetween(5000, null)
               ->withPoster()
               ->sortByKinopoiskRating();
        
        $results = $this->movieClient->searchMovies($filter, 1, 20);
        
        return array_map(function($movie) {
            return [
                'name' => $movie->name,
                'rating' => $movie->rating->kp,
                'votes' => $movie->votes->kp ?? 0,
                'genres' => implode(', ', array_map(fn($g) => $g->name, $movie->genres ?? [])),
                'director' => $this->getDirector($movie->persons ?? [])
            ];
        }, $results->docs);
    }
    
    private function getDirector(array $persons): ?string {
        foreach ($persons as $person) {
            if ($person->profession === '—Ä–µ–∂–∏—Å—Å–µ—Ä—ã') {
                return $person->name;
            }
        }
        return null;
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
$analyzer = new MovieTrendAnalyzer($apiToken);

// –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –∂–∞–Ω—Ä–æ–≤ 2020-2024
$trends = $analyzer->analyzeGenreTrends(2020, 2024);
foreach ($trends as $year => $genres) {
    echo "–¢–æ–ø –∂–∞–Ω—Ä—ã {$year}: " . implode(', ', array_keys($genres)) . "\n";
}

// –ü—Ä–æ—Ä—ã–≤—ã 2023 –≥–æ–¥–∞
$breakthroughs = $analyzer->findBreakthroughMovies(2023, 8.5);
echo "\n–ü—Ä–æ—Ä—ã–≤—ã 2023 –≥–æ–¥–∞:\n";
foreach ($breakthroughs as $movie) {
    echo "- {$movie['name']} ({$movie['rating']}/10) - {$movie['director']}\n";
}
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```php
use KinopoiskDev\Exceptions\KinopoiskDevException;
use KinopoiskDev\Exceptions\KinopoiskResponseException;

try {
    $movie = $movieClient->getMovieById(999999999);
} catch (KinopoiskResponseException $e) {
    // –û—à–∏–±–∫–∏ API (401, 403, 404)
    switch ($e->getCode()) {
        case 401:
            echo "–ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω API\n";
            break;
        case 403:
            echo "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤\n";
            break;
        case 404:
            echo "–§–∏–ª—å–º –Ω–µ –Ω–∞–π–¥–µ–Ω\n";
            break;
    }
} catch (KinopoiskDevException $e) {
    // –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞
    echo "–û—à–∏–±–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞: " . $e->getMessage() . "\n";
} catch (\JsonException $e) {
    // –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
    echo "–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–∞: " . $e->getMessage() . "\n";
} catch (\Exception $e) {
    // –û–±—â–∏–µ –æ—à–∏–±–∫–∏
    echo "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: " . $e->getMessage() . "\n";
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π** —á–µ—Ä–µ–∑ selectFields
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –ª–∏–º–∏—Ç–æ–≤** –∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ retry –ª–æ–≥–∏–∫—É

```php
// –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
$filter = new MovieSearchFilter();
$filter->addFilter('selectFields', ['id', 'name', 'year', 'rating', 'poster'])
       ->withRatingBetween(8.0, 10.0)
       ->withPoster();

$results = $movieClient->searchMovies($filter, 1, 50);
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—à –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–¥—É

- –°–ª–µ–¥—É–π—Ç–µ PSR-12 —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
- –î–æ–±–∞–≤–ª—è–π—Ç–µ PHPDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –ü–æ–∫—Ä—ã–≤–∞–π—Ç–µ –∫–æ–¥ —Ç–µ—Å—Ç–∞–º–∏
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](https://kinopoiskdev.readme.io/)
- [–°–∞–π—Ç Kinopoisk.dev](https://kinopoisk.dev/)
- [Telegram –±–æ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞](https://t.me/kinopoiskdev_bot)
- [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/your-username/kinopoisk-dev-client)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ issues](https://github.com/your-username/kinopoisk-dev-client/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π issue —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ù–∞–ø–∏—à–∏—Ç–µ –≤ [Telegram —á–∞—Ç](https://t.me/kinopoiskdev_chat)

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∞**