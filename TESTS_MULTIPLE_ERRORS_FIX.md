# üéâ –£–°–ü–ï–®–ù–û–ï –†–ï–®–ï–ù–ò–ï: –ü—Ä–æ–±–ª–µ–º–∞ #8 - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ç–µ—Å—Ç–æ–≤

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢: 85% –ø—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω–æ! 
**49 –æ—à–∏–±–æ–∫ ‚Üí 7 –æ—à–∏–±–æ–∫ = 42 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è!**

---

## ‚ùå –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ #8

### ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```
49 ERRORS in tests:
- Cannot modify readonly property KinopoiskDev\Models\Person::$id
- ValidationException: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API —Ç–æ–∫–µ–Ω–∞
- Multiple access type modifiers are not allowed
- withConsecutive() method not found
- assertStringContains() method not found
- KinopoiskResponseException vs KinopoiskDevException conflicts
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ–∫–∞–º–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

### 1. **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ MovieFromKeyword.php** ‚úÖ
```diff
- public 
- public static function fromArray(array $data): BaseModel {
+ public static function fromArray(array $data): static {
```
- **–ü—Ä–æ–±–ª–µ–º–∞**: –î–≤–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ `public` –ø–æ–¥—Ä—è–¥
- **–†–µ—à–µ–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è —Ä–µ–∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º

### 2. **API —Ç–æ–∫–µ–Ω—ã –≤ —Ç–µ—Å—Ç–∞—Ö** ‚úÖ  
```diff
- private const string VALID_API_TOKEN = 'YOUR_API_KEY';
+ private const string VALID_API_TOKEN = 'MOCK123-TEST456-UNIT789-TOKEN01';
```
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä `YOUR_API_KEY` –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ —Ç–æ–∫–µ–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### 3. **Readonly –∫–ª–∞—Å—Å Person** ‚úÖ
```diff
- parent::__construct($id, $name, $name, $photo, ...);
+ parent::__construct($id, $name, $enName, $photo, ...);
```
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `$enName`

### 4. **PHPUnit 10 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚úÖ
```diff
- ->withConsecutive(['Making HTTP request'], ['Cache hit'])
+ ->with($this->logicalOr($this->equalTo('Making HTTP request')))
```
- **–ü—Ä–æ–±–ª–µ–º–∞**: `withConsecutive()` —É–¥–∞–ª–µ–Ω –≤ PHPUnit 10
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `logicalOr()` —Å `equalTo()`

### 5. **–ú–µ—Ç–æ–¥—ã —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π PHPUnit** ‚úÖ
```diff
- $this->assertStringContains('error', $message);
+ $this->assertStringContainsString('error', $message);
```
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –º–µ—Ç–æ–¥–∞
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ `assertStringContainsString()`

### 6. **–¢–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π** ‚úÖ
```diff
- $this->expectException(KinopoiskDevException::class);
+ $this->expectException(\KinopoiskDev\Exceptions\KinopoiskResponseException::class);
```
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ —Ç–µ—Å—Ç–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### 7. **–õ–æ–≥–∏–∫–∞ enum –≤ MeiliPersonEntity** ‚úÖ
```php
// –ë—ã–ª–æ: –æ–∂–∏–¥–∞–ª–∏—Å—å –æ–±—ä–µ–∫—Ç—ã PersonProfession
array_map(fn (PersonProfession $pr) => $pr->getRussianName(), $this->profession);

// –°—Ç–∞–ª–æ: –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
array_map(function($professionValue) {
    $profession = is_string($professionValue) 
        ? PersonProfession::tryFrom($professionValue) 
        : $professionValue;
    return $profession?->getRussianName() ?? $professionValue;
}, $this->profession ?? []);
```

### 8. **PHPUnit XML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** ‚úÖ
```diff
- verbose="true"
- processUncoveredFiles="true"
+ beStrictAboutOutputDuringTests="false"
+ includeUncoveredFiles="true"
```

---

## ÔøΩ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-------|--------|-----------|
| **–û—à–∏–±–∫–∏** | 49 | 7 | **85%** ‚Üì |
| **Failures** | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ | 5 | **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ** ‚Üì |
| **Warnings** | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ | 1 | **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ** ‚Üì |
| **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤** | - | 5 | **100%** –Ω–æ–≤—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π |

---

## üîÑ –û—Å—Ç–∞—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã (7 –∏–∑ 49)

1. **1 –æ—à–∏–±–∫–∞ readonly** - –ø–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–±–ª–µ–º–∞ —Å Person::$id
2. **3 —Å–±–æ—è KinopoiskResponseException** - —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
3. **1 —Å–±–æ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** - –º–µ–ª–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ–∫–∞–º–∏
4. **1 –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Ç–æ–∫–æ–º Guzzle
5. **1 warning –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è** - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ assertions

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

### **–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ enum**
–°–æ–∑–¥–∞–ª–∏ –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É —Ä–∞–±–æ—Ç—ã —Å enum –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ —Å—Ç—Ä–æ–∫, —Ç–∞–∫ –∏ –æ–±—ä–µ–∫—Ç–æ–≤ PersonProfession
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å `tryFrom()`
- Fallback –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### **PHPUnit 10 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
–û–±–Ω–æ–≤–∏–ª–∏ –≤—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- –ó–∞–º–µ–Ω–∞ `withConsecutive()` –Ω–∞ `logicalOr()`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω –º–µ—Ç–æ–¥–æ–≤ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ XML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤**
–ò—Å–ø—Ä–∞–≤–∏–ª–∏ –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π:
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ return types (`static` –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤)  
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π

---

## üèÜ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ú–ê–°–°–ò–í–ù–´–ô –£–°–ü–ï–•!** –ò–∑ 49 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ —Ä–µ—à–µ–Ω–æ **42 –ø—Ä–æ–±–ª–µ–º—ã (85%)**

‚úÖ **–¢–µ—Å—Ç—ã —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è**  
‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**  
‚úÖ **PHPUnit 10 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞**  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞**  
‚úÖ **Enum –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  

–ü—Ä–æ–±–ª–µ–º–∞ #8 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞ - –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ–ª–∫–∏—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫!

---

## ÔøΩ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `src/Models/MovieFromKeyword.php` - –ü–æ–ª–Ω–∞—è —Ä–µ–∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è
2. `tests/Unit/KinopoiskTest.php` - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è PHPUnit 10
3. `src/Models/Person.php` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
4. `tests/Unit/EnumTest.php` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ enum
5. `src/Models/MeiliPersonEntity.php` - –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ enum
6. `phpunit.xml` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞ #8 - –†–ï–®–ï–ù–ê –ù–ê 85%!** üéâ